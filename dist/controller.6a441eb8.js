require("regenerator-runtime/runtime"),require("core-js/stable");var e=require("fractional");require("regenerator-runtime");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={};Object.defineProperty(n,"__esModule",{value:!0});var r=(w=void 0,S=n.state=w,P=n.loadRecipe=S,E=n.loadSearchResults=P,j=n.getSearchResultsPage=E,M=n.updateServings=j,x=n.addBookmark=M,n.deleteBookmark=x);n.uploadRecipe=r;var o={};Object.defineProperty(o,"__esModule",{value:!0});var a=(i=void 0,c=o.API_URL=i,u=o.TIMEOUT_SEC=c,s=o.RES_PER_PAGE=u,o.KEY=s);o.MODAL_CLOSE_SEC=a;var i="https://forkify-api.herokuapp.com/api/v2/recipes/";o.API_URL=i;var c=10;o.TIMEOUT_SEC=c;var u=10;o.RES_PER_PAGE=u;var s="d09831b3-1334-4de1-ae01-ffb500d798f5";o.KEY=s;a=2.5,o.MODAL_CLOSE_SEC=a;var l={};Object.defineProperty(l,"__esModule",{value:!0});var f=void 0;function p(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}l.AJAX=f;var d=function(e){return new Promise((function(t,n){setTimeout((function(){n(new Error("Request took too long! Timeout after ".concat(e," second")))}),1e3*e)}))};function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}f=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,a,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:void 0,e.prev=1,r=n?fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}):fetch(t),e.next=5,Promise.race([r,d(o.TIMEOUT_SEC)]);case 5:return a=e.sent,e.next=8,a.json();case 8:if(i=e.sent,a.ok){e.next=11;break}throw new Error("".concat(i.message," (").concat(a.status,")"));case 11:return e.abrupt("return",i);case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,c,"next",e)}function c(e){p(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),l.AJAX=f;var k={recipe:{},search:{query:"",results:[],page:1,resultsPerPage:o.RES_PER_PAGE},bookmarks:[]},w=k;n.state=w;var O=function(e){var t=e.data.recipe;return g({id:t.id,title:t.title,publisher:t.publisher,sourceUrl:t.source_url,image:t.image_url,servings:t.servings,cookingTime:t.cooking_time,ingredients:t.ingredients},t.key&&{key:t.key})},S=function(){var e=b(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.AJAX)("".concat(o.API_URL).concat(t,"?key=").concat(o.KEY));case 3:n=e.sent,k.recipe=O(n),k.bookmarks.some((function(e){return e.id===t}))?k.recipe.bookmarked=!0:k.recipe.bookmarked=!1,console.log(k.recipe),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error("".concat(e.t0," ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥")),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();n.loadRecipe=S;var P=function(){var e=b(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k.search.query=t,e.next=4,(0,l.AJAX)("".concat(o.API_URL,"?search=").concat(t,"&key=").concat(o.KEY));case 4:n=e.sent,console.log(n),k.search.results=n.data.recipes.map((function(e){return g({id:e.id,title:e.title,publisher:e.publisher,image:e.image_url},e.key&&{key:e.key})})),k.search.page=1,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),console.error("".concat(e.t0," ðŸ’¥ðŸ’¥ðŸ’¥ðŸ’¥")),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();n.loadSearchResults=P;var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.search.page;k.search.page=e;var t=(e-1)*k.search.resultsPerPage,n=e*k.search.resultsPerPage;return k.search.results.slice(t,n)};n.getSearchResultsPage=E;var j=function(e){k.recipe.ingredients.forEach((function(t){t.quantity=t.quantity*e/k.recipe.servings})),k.recipe.servings=e};n.updateServings=j;var R=function(){localStorage.setItem("bookmarks",JSON.stringify(k.bookmarks))},A=function(e){k.bookmarks.push(e),e.id===k.recipe.id&&(k.recipe.bookmarked=!0),R()},M=A;n.addBookmark=M;var x=function(e){var t=k.bookmarks.findIndex((function(t){return t.id===e}));k.bookmarks.splice(t,1),e===k.recipe.id&&(k.recipe.bookmarked=!1),R()};n.deleteBookmark=x;var T;(T=localStorage.getItem("bookmarks"))&&(k.bookmarks=JSON.parse(T)),r=function(){var e=b(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object.entries(t).filter((function(e){return e[0].startsWith("ingredient")&&""!==e[1]})).map((function(e){var t=e[1].split(",").map((function(e){return e.trim()}));if(3!==t.length)throw new Error("Wrong ingredient fromat! Please use the correct format :)");var n=v(t,3),r=n[0];return{quantity:r?+r:null,unit:n[1],description:n[2]}})),r={title:t.title,source_url:t.sourceUrl,image_url:t.image,publisher:t.publisher,cooking_time:+t.cookingTime,servings:+t.servings,ingredients:n},e.next=5,(0,l.AJAX)("".concat(o.API_URL,"?key=").concat(o.KEY),r);case 5:a=e.sent,k.recipe=O(a),A(k.recipe),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.uploadRecipe=r;var q=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var n=ht();if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n),C={};Object.defineProperty(C,"__esModule",{value:!0});var H=void 0;C.default=H;var L={};Object.defineProperty(L,"__esModule",{value:!0});var D=void 0;L.default=D;var I,U=null;I=function(){return U||(U=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return(""+e[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),U}()+"icons.c781f215.svg";var W,B=(W=I)&&W.__esModule?W:{default:W};function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=void 0}var t,n,r;return t=e,(n=[{key:"render",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||Array.isArray(e)&&0===e.length)return this.renderError();this._data=e;var n=this._generateMarkup();if(!t)return n;this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",n)}},{key:"update",value:function(e){this._data=e;var t=this._generateMarkup(),n=document.createRange().createContextualFragment(t),r=Array.from(n.querySelectorAll("*")),o=Array.from(this._parentElement.querySelectorAll("*"));r.forEach((function(e,t){var n,r=o[t];e.isEqualNode(r)||""===(null===(n=e.firstChild)||void 0===n?void 0:n.nodeValue.trim())||(r.textContent=e.textContent),e.isEqualNode(r)||Array.from(e.attributes).forEach((function(e){return r.setAttribute(e.name,e.value)}))}))}},{key:"_clear",value:function(){this._parentElement.innerHTML=""}},{key:"renderSpinner",value:function(){var e='\n      <div class="spinner">\n        <svg>\n          <use href="'.concat(B.default,'#icon-loader"></use>\n        </svg>\n      </div>\n    ');this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",e)}},{key:"renderError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._errorMessage,t='\n      <div class="error">\n        <div>\n          <svg>\n            <use href="'.concat(B.default,'#icon-alert-triangle"></use>\n          </svg>\n        </div>\n        <p>').concat(e,"</p>\n      </div>\n    ");this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}},{key:"renderMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._message,t='\n      <div class="message">\n        <div>\n          <svg>\n            <use href="'.concat(B.default,'#icon-smile"></use>\n          </svg>\n        </div>\n        <p>').concat(e,"</p>\n      </div>\n    ");this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}}])&&J(t.prototype,n),r&&J(t,r),e}(),L.default=D;var N=X(L),F=X(I),K=e;function X(e){return e&&e.__esModule?e:{default:e}}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}H=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(a,N["default"]);var t,n,r,o=V(a);function a(){var e;$(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n)))._parentElement=document.querySelector(".recipe"),e._errorMessage="We could not find that recipe. Please try another one!",e._message="",e}return t=a,(n=[{key:"addHandlerRender",value:function(e){["hashchange","load"].forEach((function(t){return window.addEventListener(t,e)}))}},{key:"addHandlerUpdateServings",value:function(e){this._parentElement.addEventListener("click",(function(t){var n=t.target.closest(".btn--update-servings");if(n){var r=n.dataset.updateTo;+r>0&&e(+r)}}))}},{key:"addHandlerAddBookmark",value:function(e){this._parentElement.addEventListener("click",(function(t){t.target.closest(".btn--bookmark")&&e()}))}},{key:"_generateMarkup",value:function(){return'\n      <figure class="recipe__fig">\n        <img src="'.concat(this._data.image,'" alt="').concat(this._data.title,'" class="recipe__img" />\n        <h1 class="recipe__title">\n          <span>').concat(this._data.title,'</span>\n        </h1>\n      </figure>\n\n      <div class="recipe__details">\n        <div class="recipe__info">\n          <svg class="recipe__info-icon">\n            <use href="').concat(F.default,'#icon-clock"></use>\n          </svg>\n          <span class="recipe__info-data recipe__info-data--minutes">').concat(this._data.cookingTime,'</span>\n          <span class="recipe__info-text">minutes</span>\n        </div>\n        <div class="recipe__info">\n          <svg class="recipe__info-icon">\n            <use href="').concat(F.default,'#icon-users"></use>\n          </svg>\n          <span class="recipe__info-data recipe__info-data--people">').concat(this._data.servings,'</span>\n          <span class="recipe__info-text">servings</span>\n\n          <div class="recipe__info-buttons">\n            <button class="btn--tiny btn--update-servings" data-update-to="').concat(this._data.servings-1,'">\n              <svg>\n                <use href="').concat(F.default,'#icon-minus-circle"></use>\n              </svg>\n            </button>\n            <button class="btn--tiny btn--update-servings" data-update-to="').concat(this._data.servings+1,'">\n              <svg>\n                <use href="').concat(F.default,'#icon-plus-circle"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div class="recipe__user-generated ').concat(this._data.key?"":"hidden",'">\n          <svg>\n            <use href="').concat(F.default,'#icon-user"></use>\n          </svg>\n        </div>\n        <button class="btn--round btn--bookmark">\n          <svg class="">\n            <use href="').concat(F.default,"#icon-bookmark").concat(this._data.bookmarked?"-fill":"",'"></use>\n          </svg>\n        </button>\n      </div>\n\n      <div class="recipe__ingredients">\n        <h2 class="heading--2">Recipe ingredients</h2>\n        <ul class="recipe__ingredient-list">\n          ').concat(this._data.ingredients.map(this._generateMarkupIngredient).join(""),'\n      </div>\n\n      <div class="recipe__directions">\n        <h2 class="heading--2">How to cook it</h2>\n        <p class="recipe__directions-text">\n          This recipe was carefully designed and tested by\n          <span class="recipe__publisher">').concat(this._data.publisher,'</span>. Please check out\n          directions at their website.\n        </p>\n        <a\n          class="btn--small recipe__btn"\n          href="').concat(this._data.sourceUrl,'"\n          target="_blank"\n        >\n          <span>Directions</span>\n          <svg class="search__icon">\n            <use href="').concat(F.default,'#icon-arrow-right"></use>\n          </svg>\n        </a>\n      </div>\n    ')}},{key:"_generateMarkupIngredient",value:function(e){return'\n    <li class="recipe__ingredient">\n      <svg class="recipe__icon">\n        <use href="'.concat(F.default,'#icon-check"></use>\n      </svg>\n      <div class="recipe__quantity">').concat(e.quantity?new K.Fraction(e.quantity).toString():"",'</div>\n      <div class="recipe__description">\n        <span class="recipe__unit">').concat(e.unit,"</span>\n        ").concat(e.description,"\n      </div>\n    </li>\n  ")}}])&&G(t.prototype,n),r&&G(t,r),a}()),C.default=H;var ee=yt(C),te={};Object.defineProperty(te,"__esModule",{value:!0});var ne=void 0;function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}te.default=ne,ne=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentEl=document.querySelector(".search")}var t,n,r;return t=e,(n=[{key:"getQuery",value:function(){var e=this._parentEl.querySelector(".search__field").value;return this._clearInput(),e}},{key:"_clearInput",value:function(){this._parentEl.querySelector(".search__field").value=""}},{key:"addHandlerSearch",value:function(e){this._parentEl.addEventListener("submit",(function(t){t.preventDefault(),e()}))}}])&&re(t.prototype,n),r&&re(t,r),e}()),te.default=ne;var oe=yt(te),ae={};Object.defineProperty(ae,"__esModule",{value:!0});var ie=void 0;ae.default=ie;var ce=ke(L),ue={};Object.defineProperty(ue,"__esModule",{value:!0});var se=void 0;ue.default=se;var le=pe(L),fe=pe(I);function pe(e){return e&&e.__esModule?e:{default:e}}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _e(this,n)}}function _e(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}se=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(a,le["default"]);var t,n,r,o=be(a);function a(){var e;ve(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n)))._parentElement="",e}return t=a,(n=[{key:"_generateMarkup",value:function(){var e=window.location.hash.slice(1);return'\n      <li class="preview">\n        <a class="preview__link '.concat(this._data.id===e?"preview__link--active":"",'" href="#').concat(this._data.id,'">\n          <figure class="preview__fig">\n            <img src="').concat(this._data.image,'" alt="').concat(this._data.title,'" />\n          </figure>\n          <div class="preview__data">\n            <h4 class="preview__title">').concat(this._data.title,'</h4>\n            <p class="preview__publisher">').concat(this._data.publisher,'</p>\n            <div class="preview__user-generated ').concat(this._data.key?"":"hidden",'">\n              <svg>\n              <use href="').concat(fe.default,'#icon-user"></use>\n              </svg>\n            </div>\n          </div>\n        </a>\n      </li>\n    ')}}])&&ye(t.prototype,n),r&&ye(t,r),a}()),ue.default=se;var me=ke(ue);ke(I);function ke(e){return e&&e.__esModule?e:{default:e}}function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ie=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(a,ce["default"]);var t,n,r,o=Ee(a);function a(){var e;Oe(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n)))._parentElement=document.querySelector(".results"),e._errorMessage="No recipes found for your query! Please try again ;)",e._message="",e}return t=a,(n=[{key:"_generateMarkup",value:function(){return this._data.map((function(e){return me.default.render(e,!1)})).join("")}}])&&Se(t.prototype,n),r&&Se(t,r),a}()),ae.default=ie;var Ae=yt(ae),Me={};Object.defineProperty(Me,"__esModule",{value:!0});var xe=void 0;Me.default=xe;var Te=Ce(L),qe=Ce(I);function Ce(e){return e&&e.__esModule?e:{default:e}}function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Be(e);if(t){var o=Be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return We(this,n)}}function We(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}xe=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(a,Te["default"]);var t,n,r,o=Ue(a);function a(){var e;Le(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n)))._parentElement=document.querySelector(".pagination"),e}return t=a,(n=[{key:"addHandlerClick",value:function(e){this._parentElement.addEventListener("click",(function(t){var n=t.target.closest(".btn--inline");if(n){var r=+n.dataset.goto;e(r)}}))}},{key:"_generateMarkup",value:function(){var e=this._data.page,t=Math.ceil(this._data.results.length/this._data.resultsPerPage);return 1===e&&t>1?'\n        <button data-goto="'.concat(e+1,'" class="btn--inline pagination__btn--next">\n          <span>Page ').concat(e+1,'</span>\n          <svg class="search__icon">\n            <use href="').concat(qe.default,'#icon-arrow-right"></use>\n          </svg>\n        </button>\n      '):e===t&&t>1?'\n        <button data-goto="'.concat(e-1,'" class="btn--inline pagination__btn--prev">\n          <svg class="search__icon">\n            <use href="').concat(qe.default,'#icon-arrow-left"></use>\n          </svg>\n          <span>Page ').concat(e-1,"</span>\n        </button>\n      "):e<t?'\n        <button data-goto="'.concat(e-1,'" class="btn--inline pagination__btn--prev">\n          <svg class="search__icon">\n            <use href="').concat(qe.default,'#icon-arrow-left"></use>\n          </svg>\n          <span>Page ').concat(e-1,'</span>\n        </button>\n        <button data-goto="').concat(e+1,'" class="btn--inline pagination__btn--next">\n          <span>Page ').concat(e+1,'</span>\n          <svg class="search__icon">\n            <use href="').concat(qe.default,'#icon-arrow-right"></use>\n          </svg>\n        </button>\n      '):""}}])&&De(t.prototype,n),r&&De(t,r),a}()),Me.default=xe;var Je=yt(Me),Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var Fe=void 0;Ne.default=Fe;var Ke=Ye(L),Xe=Ye(ue);Ye(I);function Ye(e){return e&&e.__esModule?e:{default:e}}function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=et(e);if(t){var o=et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Fe=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(a,Ke["default"]);var t,n,r,o=ze(a);function a(){var e;Ge(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n)))._parentElement=document.querySelector(".bookmarks__list"),e._errorMessage="No bookmarks yet. Find a nice recipe and bookmark it ;)",e._message="",e}return t=a,(n=[{key:"addHandlerRender",value:function(e){window.addEventListener("load",e)}},{key:"_generateMarkup",value:function(){return this._data.map((function(e){return Xe.default.render(e,!1)})).join("")}}])&&Qe(t.prototype,n),r&&Qe(t,r),a}()),Ne.default=Fe;var tt=yt(Ne),nt={};Object.defineProperty(nt,"__esModule",{value:!0});var rt=void 0;nt.default=rt;var ot=at(L);at(I);function at(e){return e&&e.__esModule?e:{default:e}}function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dt(e);if(t){var o=dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}rt=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,ot["default"]);var t,n,r,o=ft(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this))._parentElement=document.querySelector(".upload"),e._message="Recipe was successfully uploaded :)",e._window=document.querySelector(".add-recipe-window"),e._overlay=document.querySelector(".overlay"),e._btnOpen=document.querySelector(".nav__btn--add-recipe"),e._btnClose=document.querySelector(".btn--close-modal"),e._addHandlerShowWindow(),e._addHandlerHideWindow(),e}return t=a,(n=[{key:"toggleWindow",value:function(){this._overlay.classList.toggle("hidden"),this._window.classList.toggle("hidden")}},{key:"_addHandlerShowWindow",value:function(){this._btnOpen.addEventListener("click",this.toggleWindow.bind(this))}},{key:"_addHandlerHideWindow",value:function(){this._btnClose.addEventListener("click",this.toggleWindow.bind(this)),this._overlay.addEventListener("click",this.toggleWindow.bind(this))}},{key:"addHandlerUpload",value:function(e){this._parentElement.addEventListener("submit",(function(t){t.preventDefault();var n=ct(new FormData(this)),r=Object.fromEntries(n);e(r)}))}},{key:"_generateMarkup",value:function(){}}])&&st(t.prototype,n),r&&st(t,r),a}()),nt.default=rt;var vt=yt(nt);function yt(e){return e&&e.__esModule?e:{default:e}}function ht(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return ht=function(){return e},e}function bt(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function _t(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bt(a,r,o,i,c,"next",e)}function c(e){bt(a,r,o,i,c,"throw",e)}i(void 0)}))}}var gt=function(){var e=_t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window.location.hash.slice(1)){e.next=4;break}return e.abrupt("return");case 4:return ee.default.renderSpinner(),Ae.default.update(q.getSearchResultsPage()),tt.default.update(q.state.bookmarks),e.next=9,q.loadRecipe(t);case 9:ee.default.render(q.state.recipe),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),ee.default.renderError(),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=_t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ae.default.renderSpinner(),t=oe.default.getQuery()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,q.loadSearchResults(t);case 7:Ae.default.render(q.getSearchResultsPage()),Je.default.render(q.state.search),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),kt=function(e){Ae.default.render(q.getSearchResultsPage(e)),Je.default.render(q.state.search)},wt=function(e){q.updateServings(e),ee.default.update(q.state.recipe)},Ot=function(){q.state.recipe.bookmarked?q.deleteBookmark(q.state.recipe.id):q.addBookmark(q.state.recipe),ee.default.update(q.state.recipe),tt.default.render(q.state.bookmarks)},St=function(){tt.default.render(q.state.bookmarks)},Pt=function(){var e=_t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,vt.default.renderSpinner(),e.next=4,q.uploadRecipe(t);case 4:console.log(q.state.recipe),ee.default.render(q.state.recipe),vt.default.renderMessage(),tt.default.render(q.state.bookmarks),window.history.pushState(null,"","#".concat(q.state.recipe.id)),setTimeout((function(){vt.default.toggleWindow()}),1e3*o.MODAL_CLOSE_SEC),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("ðŸ’¥",e.t0),vt.default.renderError(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();tt.default.addHandlerRender(St),ee.default.addHandlerRender(gt),ee.default.addHandlerUpdateServings(wt),ee.default.addHandlerAddBookmark(Ot),oe.default.addHandlerSearch(mt),Je.default.addHandlerClick(kt),vt.default.addHandlerUpload(Pt);
//# sourceMappingURL=controller.6a441eb8.js.map
